# Registration & On-Boarding Implementation Plan

> This checklist tracks progress on building the flow described in
> `004.5-registration-onboarding-arch-en.md`.

## Legend
- [x] — **Done**
- [ ] — **Pending / in progress**
- [~] — **Partially complete**

---

### 1. Step 1 – Basic Registration (User + Phone)
- [x] `BasicRegistrationForm` with minimal data & validation
- [x] `register_view` (GET/POST, HTMX-friendly)
- [x] OTP generation & storage in session (demo)
- [x] Templates: `register.html`, `register_form_partial.html`
- [x] URL route `/register`

### 1b. Phone Verification
- [x] `verify_phone_view` with OTP validation
- [x] Template `verify_phone.html`
- [x] URL route `/verify-phone`
- [x] HX-Redirect support for HTMX

### 2. Step 2 – Role-specific Profile Data
- [x] Buyer profile form (`BuyerRegistrationForm`)
- [x] Seller profile form (`SellerRegistrationForm`) with dynamic required fields (`legal_form`)
- [x] Views & templates for step 2 (HTMX fragments)
- [x] URL routes `/register/buyer/` & `/register/seller/`
- [ ] Validation & DB transactions via `RegistrationService`

### 3. Models & Migrations
- [x] `PhoneNumber` model (already merged earlier)
- [x] `BuyerProfile` field `delivery_address` (NIP removed per updated spec)
- [x] `SellerProfile` extended fields per spec (business data, IBAN, docs)
- [ ] Additional constraints & helpers

### 4. Service Layer
- [ ] `RegistrationService.register_basic()` — centralises logic
- [ ] `RegistrationService.verify_phone()`
- [ ] `RegistrationService.register_buyer()`
- [ ] `RegistrationService.register_seller()`

### 5. API Endpoints (optional if using traditional views)
- [ ] `/api/auth/register/basic/`
- [ ] `/api/auth/verify-phone/`
- [ ] `/api/auth/register/buyer/`
- [ ] `/api/auth/register/seller/`

### 6. Front-End Polish
- [ ] Input masking & validation via Alpine.js (OTP timer, phone format)
- [ ] Snackbar / toast notifications for success & errors
- [ ] A11y audit (labels, ARIA, focus management)

### 7. Compliance & Security
- [ ] Persist explicit consents in `Consent` table
- [ ] SMS gateway integration (real OTP)
- [ ] Rate-limiting on OTP attempts
- [ ] TLS enforced in production
- [ ] DPIA update if scope changes

### 8. Tests
- [ ] Unit tests for forms & service layer
- [ ] Integration tests for registration flow (happy & sad paths)

### 9. Documentation
- [x] Architecture document (`004.5-registration-onboarding-arch-en.md`)
- [ ] Update README / user-facing docs

---

_Last updated: 2025-07-09_ 